System.register("chunks:///_virtual/AnalyzeOlympusXieYi.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"3ef025kxqJAmaS7JmzJm1Qj","AnalyzeOlympusXieYi",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/OLYMPUS",["./AnalyzeOlympusXieYi.ts","./OlympusGameProtocol.ts","./OlympusGameSence.ts","./OlympusItem.ts","./OlympusRollPanel.ts"],(function(){return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/OlympusGameProtocol.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var _,r,t;return{setters:[function(e){_=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,t=e._decorator}],execute:function(){r._RF.push({},"d3fbaBEr+FPA6CU+3ACny5w","OlympusGameProtocol",void 0);t.ccclass,e("ICON_KIND",function(e){return e[e.ik0=0]="ik0",e[e.ik1=1]="ik1",e[e.ik2=2]="ik2",e[e.ik3=3]="ik3",e[e.ik4=4]="ik4",e[e.ik5=5]="ik5",e[e.ik6=6]="ik6",e[e.ik7=7]="ik7",e[e.ik8=8]="ik8",e[e.ik9=9]="ik9",e[e.ik10=10]="ik10",e[e.ik11=11]="ik11",e[e.ICON_KIND_COUNT=12]="ICON_KIND_COUNT",e}({})),e("OlympusGameProtocol",{LUCKMAN_LIST_LENGTH:5,MAX_BET_LEVEL:5,MAX_LINE_COUNT:18,MAX_COL_NUM:6,MAX_ROW_NUM:5,MAX_COMBO:10,CELL_COUNT:30,FREE_ICON:9,WILD_ICON:9,SPECIAL_ICON:10,JACKPOT_ICON:11,SUB_S_GAME_FREE:2002,SUB_S_REBACK_LOTTERY:149,SUB_S_JACKPOT_RESET:152,SUB_S_SEND_CONTROL_INFO:153,SUB_C_LOTTERY:113}),e("gameConst",{currentScore:"currentScore",lastScore:"lastScore",curBetIndex:"curBetIndex",jackpotScore:"jackpotScore",JackPotTax:.01,ICON_Mult:{0:[[21,500],[17,300],[14,150],[11,75],[8,25],[7,0],[6,0],[5,0]],1:[[21,800],[17,480],[14,240],[11,120],[8,40],[7,0],[6,0],[5,0]],2:[[21,1e3],[17,600],[14,300],[11,150],[8,50],[7,0],[6,0],[5,0]],3:[[21,1600],[17,960],[14,480],[11,240],[8,80],[7,0],[6,0],[5,0]],4:[[21,2e3],[17,1200],[14,600],[11,300],[8,100],[7,0],[6,0],[5,0]],5:[[21,3e3],[17,1800],[14,900],[11,450],[8,150],[7,0],[6,0],[5,0]],6:[[21,4e3],[17,2400],[14,1200],[11,600],[8,200],[7,0],[6,0],[5,0]],7:[[21,5e3],[17,3e3],[14,1500],[11,750],[8,250],[7,0],[6,0],[5,0]],8:[[21,1e4],[17,6e3],[14,3e3],[11,1500],[8,500],[7,0],[6,0],[5,0]],9:[[21,5e4],[17,3e4],[14,1e4],[11,5e3],[8,2e3],[7,1e3],[6,500],[5,300]],10:[[21,0],[17,0],[14,0],[11,0],[8,0],[7,0],[6,0],[5,0]],11:[[21,50],[17,40],[14,30],[11,20],[8,10],[7,0],[6,0],[5,0]]},getIconMult:function(e,r){if(this.ICON_Mult[e])for(var t,o=_(this.ICON_Mult[e]);!(t=o()).done;){var i=t.value;if(r>=i[0])return i[1]}return 0}});r._RF.pop()}}}));

System.register("chunks:///_virtual/OlympusGameSence.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameBase.ts","./OlympusGameProtocol.ts","./Global.ts","./TopTipMsg.ts","./OlympusRollPanel.ts","./GlobalManager.ts","./UIHelper.ts","./resManager.ts","./eventManager.ts","./msgac.ts","./AudioManager.ts"],(function(t){var e,i,o,n,a,r,s,l,c,h,u,d,p,m,f,g,S,y,_,k,N,v,b,C,B,w,A,P,x,J,M,I,L,G,R,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,s=t._decorator,l=t.Node,c=t.Label,h=t.sp,u=t.AudioClip,d=t.v3,p=t.director,m=t.game,f=t.Game,g=t.tween,S=t.find,y=t.RichText,_=t.UITransform,k=t.instantiate,N=t.Button,v=t.Toggle,b=t.Prefab},function(t){C=t.GameBase},function(t){B=t.gameConst,w=t.OlympusGameProtocol,A=t.ICON_KIND},function(t){P=t.global},function(t){x=t.TopTipMsg},function(t){J=t.OlympusRollPanel},function(t){M=t.globalMgr},function(t){I=t.uiHelper},function(t){L=t.resManager},function(t){G=t.eventManager},function(t){R=t.msgac},function(t){E=t.audioManager}],execute:function(){var F,W,T,j,z,O,D,U,V,H,X,q,Y,K,Q,Z,$,tt,et,it,ot,nt,at,rt,st,lt,ct,ht,ut,dt,pt,mt,ft,gt,St,yt,_t,kt,Nt,vt,bt,Ct,Bt,wt,At,Pt,xt,Jt,Mt,It,Lt,Gt,Rt,Et,Ft,Wt;r._RF.push({},"c05d31f+idJXac+dlULGhQV","OlympusGameSence",void 0);var Tt=s.ccclass,jt=s.menu,zt=s.property;t("OlympusGameSence",(F=Tt("OlympusGameSence"),W=jt("Game/Olympus/GameSence"),T=zt(l),j=zt(c),z=zt(l),O=zt(l),D=zt(l),U=zt(l),V=zt(l),H=zt(l),X=zt(l),q=zt(l),Y=zt(l),K=zt(l),Q=zt(c),Z=zt([h.SkeletonData]),$=zt([u]),tt=zt([h.Skeleton]),et=zt(l),it=zt(l),ot=zt([l]),nt=zt(l),at=zt(l),rt=zt(l),st=zt(l),lt=zt(l),ct=zt(l),ht=zt(l),F(ut=W((pt=e((dt=function(t){function e(){var e;return e=t.call(this)||this,o(e,"rollNode",pt,n(e)),o(e,"playerScore",mt,n(e)),o(e,"resultNode",ft,n(e)),o(e,"betNode",gt,n(e)),o(e,"startBtn",St,n(e)),o(e,"addBtn",yt,n(e)),o(e,"delBtn",_t,n(e)),o(e,"quickBtn",kt,n(e)),o(e,"homeBtn",Nt,n(e)),o(e,"exitBtn",vt,n(e)),o(e,"freeLeftNode",bt,n(e)),o(e,"ruleNode",Ct,n(e)),o(e,"winScoreLabel",Bt,n(e)),o(e,"winSpineData",wt,n(e)),o(e,"audioArr",At,n(e)),o(e,"jackpotAni",Pt,n(e)),o(e,"jackpotNode",xt,n(e)),o(e,"jackpotNumClone",Jt,n(e)),o(e,"jackpotNums",Mt,n(e)),o(e,"rightJackpotNode",It,n(e)),o(e,"rightJackpotPlayer1",Lt,n(e)),o(e,"rightJackpotPlayer2",Gt,n(e)),o(e,"rightJackpotPanel",Rt,n(e)),o(e,"rightJackPotClone",Et,n(e)),o(e,"rightJackPotShowNode",Ft,n(e)),o(e,"rightJackPotContent",Wt,n(e)),e.TipNode=null,e.rollPanel=void 0,e.gameConfig=void 0,e.bets=void 0,e.LG_PATH_SC=void 0,e.jackpotScore=void 0,e.svrJackpotScore=void 0,e.jackpotNumPositionY=void 0,e.jackpotRecord=void 0,e.delayShowJackpotSweepTime=void 0,e.delayNextTime=void 0,e._lastScore=void 0,e.allWinScore=void 0,e._gameEnd=void 0,e.nowShowIdx=void 0,e._showControl=void 0,e._currentScore=void 0,e.curBetIndex=void 0,e.leftFreeCount=void 0,e.gameEndData=void 0,e._gameRecords=void 0,e._nFreeCount=void 0,e._gameState=void 0,e._bSpecialGame=void 0,e._bQuickGame=void 0,e.playinfScore=void 0,e.playinfMult=0,e.needPlayinfScore=void 0,e.isPlayingScoreAddAni=void 0,e.upFreeWinLabel=void 0,e._bAutoGame=void 0,e.winAniIdx=void 0,e._bFreeState=void 0,e.upScoreLabel1=void 0,e._nFreeTotal=void 0,e._ruleNode=void 0,e.setPanel=void 0,e._nAutoCount=void 0,e.upScoreLabel=void 0,e.upMultLabel=void 0,e._backHome=void 0,e._super=void 0,e}i(e,t);var r=e.prototype;return r.update=function(t){this.delayNextTime<=0?this.jumpNextJackpot():this.delayNextTime-=t,this.delayShowJackpotSweepTime<=0?(this.jackpotAni.clearTracks(),this.jackpotAni.setAnimation(0,"a1",!1),this.delayShowJackpotSweepTime=10):this.delayShowJackpotSweepTime-=t},r.onLoad=function(){this.rollPanel=this.rollNode.getComponent(J),this.gameConfig={},this.bets=[],this.addNormalButtonListener(),this.LG_PATH_SC="OLYMPUS/",this.jackpotScore=-1,this.jackpotNumPositionY=[{y1:-208,y2:298},{y1:-163,y2:354},{y1:-118,y2:409},{y1:-73,y2:464},{y1:-28,y2:519},{y1:-434,y2:16},{y1:-388,y2:62},{y1:-344,y2:107},{y1:-298,y2:152},{y1:-253,y2:197}];for(var t=[0,0,0],e=t.length-1,i=8;i>=0;--i,--e){var o=this.jackpotNums[i];if(o)if(e>=0){o.active=!0;var n=this.jackpotNumPositionY[t[e]];o.setPosition(d(o.position.x,n.y1,o.position.z))}else o.active=!1}this.jackpotRecord=[],this.rightJackpotNode.active=!1,this.delayShowJackpotSweepTime=2,this.homeBtn.active=!0,//!globalMgr.config.ReviewApk; 
this.exitBtn.active=!1,G.on(R.showGameWinScore,this.showGameWinScore,this),G.on(R.exitGameWhenPlaying,this.exitGameWhenPlaying,this),G.on(R.showJackpotWin,this.showJackpotWin,this),G.on(R.addGameWinScore,this.addGameWinScore,this),G.on(R.playAddScoreMulti,this.playAddScoreMulti,this),G.on(R.onEventGameMessage,this.onTestMessage,this),G.on(R.saveData,this.saveData,this)},r.start=function(){this.test(),this.node.parent=p.getScene().getChildByName("Canvas"),this.node.setPosition(0,0);var t=this.getSelfPlayer();t&&(this._lastScore=t.getUserScore()),this.upPlayerScore(this._lastScore),this.allWinScore=0,E.playBGM("bgm"),this._gameEnd=!0,this.nowShowIdx=0,this.delayNextTime=10,this.jackpotRecord=[],this.getJackpotRecord(),this._showControl=!0},r.initEvent=function(){var t=this;m.on(f.EVENT_HIDE,(function(){console.log("切到后台了"),t.saveData})),m.on(f.EVENT_SHOW,(function(){E.gameOnShow()}))},r.saveData=function(){P.setLoaclStorageValue(B.currentScore,this._currentScore),P.setLoaclStorageValue(B.lastScore,this._lastScore),P.setLoaclStorageValue(B.curBetIndex,this.curBetIndex),P.setLoaclStorageValue(B.jackpotScore,this.jackpotScore)},r.test=function(){this.gameConfig.nJetton=[50,100,500,5e3],this.bets=[50,100,500,5e3],this._currentScore=parseFloat(P.getLocalStorageVaule(B.currentScore,5e4)),this._lastScore=parseFloat(P.getLocalStorageVaule(B.lastScore,5e4)),this.curBetIndex=parseFloat(P.getLocalStorageVaule(B.curBetIndex,0)),this.leftFreeCount=0,this.jackpotScore=parseFloat(P.getLocalStorageVaule(B.jackpotScore,1e5)),G.send(R.onEventGameMessage,{s:w.SUB_S_JACKPOT_RESET,msg:{lJackPot:this.jackpotScore}}),M.vv.needFree=!1,this.refrushBet()},r.addNormalButtonListener=function(){I.addButtonListener(this.startBtn,this.node,"OlympusGameSence","onClickStart"),I.addButtonListener(this.quickBtn,this.node,"OlympusGameSence","onClickQuick"),I.addButtonListener(this.homeBtn,this.node,"OlympusGameSence","onClickMenu"),I.addButtonListener(this.addBtn,this.node,"OlympusGameSence","onClickAdd"),I.addButtonListener(this.delBtn,this.node,"OlympusGameSence","onClickDel")},r.testResult=function(){var t=this,e={m_chair_id:0,m_chip_size:0,m_result_data:[],m_lottery_size:0,m_deposit_lotttery:0,m_free_count:0,m_add_multi:[],lCurScore:0};Number.isNaN(this._currentScore)?console.error("the current score is NaN"):e.lCurScore=this._currentScore,e.m_chair_id=0,e.m_chip_size=this.bets[this.curBetIndex],e.m_free_count=0,e.m_result_data=[];var i=0,o=!1,n=0;do{o=!1;var r=0,s={m_desk_data4count:[],m_desk_data:[],m_item_id:[],m_item_count:[],m_item_times:[],m_deposit_lotttery:0,m_win_score:0,bFree:!1},l=[0,0,0,0,0,0,0,0,0,0];if(s.m_desk_data4count=[[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1]],i>0){for(var c=e.m_result_data[i-1],h=c.m_desk_data4count,u=0;u<w.MAX_COL_NUM;++u)for(var d=0;d<w.MAX_ROW_NUM;++d)for(var p=0;p<c.m_item_count.length;++p){var m=c.m_item_id[p];c.m_desk_data4count[u][d]==m&&(h[u][d]=-1)}for(var f=0;f<w.MAX_COL_NUM;++f)for(var g=w.MAX_ROW_NUM-1,S=w.MAX_ROW_NUM-1;S>=0;--S)-1!=h[f][S]&&(s.m_desk_data4count[f][g--]=h[f][S],l[h[f][S]]++)}for(var y=0;y<w.MAX_COL_NUM;++y)for(var _=0;_<w.MAX_ROW_NUM;++_)if(-1==s.m_desk_data4count[y][_]){i>0&&console.log("test````````````````````");var k=this.getRandomValue(i);k==w.FREE_ICON&&r++,k==A.ik10&&(i>0&&console.log("test````````````````````"),e.m_add_multi.push(this.getRandomJiabq())),l[k]++,s.m_desk_data4count[y][_]=k}s.m_item_id=[],s.m_item_count=[],s.m_item_times=[],s.m_deposit_lotttery=0,s.m_win_score=0;for(var N=0;N<l.length;++N)if((N<A.ik9||N===A.ik11)&&l[N]>=8||N===A.ik9&&l[N]>=5){o=!0,s.m_item_id.push(N),s.m_item_count.push(l[N]);var v=B.getIconMult(N,l[N]);Number.isNaN(v)&&console.error("NaN mult"),N===A.ik11&&(v=0),s.m_item_times.push(v);var b=Math.floor(e.m_chip_size*v/100);N===A.ik11?(b=Math.floor(this.jackpotScore*v/100),s.m_deposit_lotttery=b):s.m_win_score+=b}r>=4&&(s.bFree=!0,e.m_free_count+=15);var C=P.copyObj(s.m_desk_data4count);s.m_desk_data=[];for(var x=0;x<w.MAX_ROW_NUM;++x)for(var J=0;J<w.MAX_COL_NUM;++J)s.m_desk_data.push(C[J][x]);e.m_result_data[i++]=s,e.lCurScore+=s.m_deposit_lotttery,Number.isNaN(s.m_win_score)?console.error("the res.m_win_score score is NaN"):n+=s.m_win_score}while(o);for(var M,I=0,L=a(e.m_add_multi);!(M=L()).done;){I+=M.value}I>0&&(n*=I),e.m_lottery_size=n,Number.isNaN(n)?console.error("the data.lCurScore score is NaN"):e.lCurScore+=n,Number.isNaN(e.lCurScore)&&console.error("the data.lCurScore score is NaN"),console.log("---------------------testResult data-----------------------------------"),console.log(e),setTimeout((function(){t.onRollEndInfo(e)}),300)},r.getRandomValue=function(t){return this.getRandomByExpWeight(A.ik0+1,A.ik11+1,null,3)-1},r.getRandomJiabq=function(t,e){return this.getRandomByExpWeight(null,null,[2,3,4,5,6,8,10,12,15,20,25,50,100,250,500])},r.getRandomByExpWeight=function(t,e,i,o){if(void 0===o&&(o=0),!(t&&e||i&&i.length>1))return 0;if(t&&e&&t>=e)return 0;if(i&&(t=i[0],e=i[i.length-1]),!i||i.length<=0){i=[];for(var n=t;n<=e;n++)i.push(n)}for(var a=5-o>=0?5-o:0,r=i.map((function(t){return Math.exp(-t/e*a)})),s=r.reduce((function(t,e){return t+e}),0),l=Math.random()*s,c=0;c<r.length;c++)if((l-=r[c])<=0)return i[c];return t},r.onClickCloseControlInfo=function(){this._showControl=!1,this.node.getChildByName("ControlInfo").active=!1},r.onEventSceneMessage=function(t,e,i){},r.onTestMessage=function(t){var e=t.data,i=e.msg;switch(e.s){case w.SUB_S_REBACK_LOTTERY:P.print("SGLB::结果"),this.onRollEndInfo(i);break;case w.SUB_S_JACKPOT_RESET:P.print("JACKPOT"),this.updateJackpot(i);break;default:P.print("SGLBGameSence onEventGameMessage error ")}},r.onEventGameMessage=function(t){},r.getNeedShowValue=function(t){var e=""+(t=Math.floor(t));return t<100&&(e=t<10?"00"+t:"0"+t),e},r.updateJackpot=function(t){var e=this;if(P.print("JACKPOT:"+JSON.stringify(t)),-1==this.jackpotScore||this.jackpotScore>t.lJackPot)for(var i=this.getNeedShowValue(t.lJackPot).split(""),o=i.length-1,n=8;n>=0;--n,--o){var a=this.jackpotNums[n];if(a)if(o>=0){a.active=!0;var r=this.jackpotNumPositionY[i[o]];a.setPosition(d(a.position.x,r.y1,a.position.z))}else a.active=!1}else{for(var s=this.getNeedShowValue(t.lJackPot).split(""),l=s.length-1,c=[],h=8;h>=0;--h,--l){var u=this.jackpotNums[h];u&&(l>=0?(u.active=!0,c.push({node:u,num:s[l],times:1-.1*h})):u.active=!1)}this.scheduleOnce((function(){for(var t=0,i=c;t<i.length;t++){var o=i[t];e.roll2Num(o.node,o.num,o.times)}}))}this.jackpotScore=t.lJackPot},r.roll2Num=function(t,e,i){var o=t.position.y,n=this.jackpotNumPositionY[e],a=n.y1;o>a&&(a=n.y2),t.stopAllActions(),g(t).to(i,{position:d(t.position.x,a,t.position.z)}).call((function(){t.setPosition(d(t.position.x,n.y1,t.position.z))})).start()},r.showDebugRewardInfo=function(){for(var t=this.gameEndData.m_line_count,e=this.gameEndData.m_line_id,i="中奖信息："+t+"条线[",o=0;o<t;++o)i+=e[o]+1+",";i+="]",i+=1==this.gameEndData.m_kongming?"\n中免费次数":"",S("ControlInfo/info",this.node).getChildByName("reward").getComponent(y).string=i},r.onEventGameRecord=function(t){},r.addOneRecord=function(t){},r.onEventJackpotRecord=function(t){},r.onSocketHorseMessage=function(e){t.prototype.onSocketHorseMessage.call(this,e),this.rightJackpotPanel.active=!1,this.jackpotRecord.splice(0),this.nowShowIdx=0,this.getJackpotRecord()},r.updateMarqueue=function(t){if(this.delayMarqueueTime>0){this.delayMarqueueTime-=t;var e=this.node.getChildByName("notice1"),i=e.getChildByName("Mask").getChildByName("label_notice");i.position.add(d(100*-t,0,0)),i.position.x+i.getComponent(_).width<-300&&(e.active=!1)}else{if(this.marqueueArr.length<=0)return void(this.node.getChildByName("notice1").active=!1);this.showNextMar()}},r.showWithNowIdx=function(){if(!(this.jackpotRecord.length<=0)){this.nowShowIdx>=this.jackpotRecord.length&&(this.nowShowIdx=0),this.rightJackpotNode.active=!0;var t=this.jackpotRecord[this.nowShowIdx];this.setItemInfos(this.rightJackpotPlayer1,t),this.rightJackpotPlayer1.setPosition(d(this.rightJackpotPlayer1.position.x,0,this.rightJackpotPlayer1.position.z)),this.rightJackpotPlayer2.setPosition(d(this.rightJackpotPlayer2.position.x,-60,this.rightJackpotPlayer2.position.z)),this.delayNextTime=10}},r.jumpNextJackpot=function(){if(!(this.jackpotRecord.length<2)){this.nowShowIdx++,this.nowShowIdx>=this.jackpotRecord.length&&(this.nowShowIdx=0);var t=this.jackpotRecord[this.nowShowIdx],e=null,i=null;this.rightJackpotPlayer1.position.y>this.rightJackpotPlayer2.position.y?(e=this.rightJackpotPlayer1,i=this.rightJackpotPlayer2):(e=this.rightJackpotPlayer2,i=this.rightJackpotPlayer1),this.setItemInfos(i,t),e.stopAllActions(),i.stopAllActions(),g(e).to(1,{y:60}).call((function(){e.y=-60})).start(),g(i).to(1,{y:0}).start(),this.delayNextTime=10}},r.setItemInfos=function(t,e){t&&e&&(t.active=!0,t.getChildByName("name").getComponent(c).string=e.szNickName,t.getChildByName("score").getComponent(c).string="$"+P.formatString2Score(e.lLotteryMoney))},r.onClickShowJackpotUser=function(){this.rightJackpotPanel.active=!0,this.rightJackpotPanel.getChildByName("mark").active=!0;for(var t=0;t<10;++t){var e=null;if(t>=this.rightJackPotContent.children.length?(e=k(this.rightJackPotClone)).parent=this.rightJackPotContent:e=this.rightJackPotContent.children[t],e){var i=this.jackpotRecord[t];i?this.setItemInfos(e,i):e.active=!1}}this.rightJackPotShowNode.stopAllActions(),this.rightJackPotShowNode.setScale(d(this.rightJackPotShowNode.scale.x,0,this.rightJackPotShowNode.scale.z)),g(this.rightJackPotShowNode).to(.07,{scale:d(this.rightJackPotShowNode.scale.x,1,this.rightJackPotShowNode.scale.z)}).start()},r.onClickHideJackpotUser=function(){var t=this;this.rightJackpotPanel.getChildByName("mark").active=!1,this.rightJackPotShowNode.stopAllActions(),this.rightJackPotShowNode.setScale(d(this.rightJackPotShowNode.scale.x,1,this.rightJackPotShowNode.scale.z)),g(this.rightJackPotShowNode).to(.07,{scale:d(this.rightJackPotShowNode.scale.x,0,this.rightJackPotShowNode.scale.z)}).call((function(){t.rightJackpotPanel.active=!1})).start()},r.backHome=function(){},r.exitGameWhenPlaying=function(){},r.onRollEndInfo=function(t){P.print(t),this.gameEndData=t,this.rollPanel.setRollDatas(t),this.rollPanel.openPrizes(!1),this.showDebugRewardInfo()},r.makeXieYi=function(t,e,i){},r.onSendRoll=function(){this.testResult()},r.upLeftCount=function(){this.freeLeftNode.active=this._bSpecialGame,this._bSpecialGame&&(this.freeLeftNode.getChildByName("left").getComponent(c).string=this._nFreeCount+"/"+this._nFreeTotal)},r.upFreeCount=function(){var t=this.node.getChildByName("FuncBtnNode").getChildByName("btn_left");t.active=this._nFreeCount>0,t.getChildByName("left").getComponent(c).string=this._nFreeCount-1+"/"+this._nFreeTotal},r.judgeCannotRollGame=function(){return!!(this.bets&&this.gameConfig&&this.gameConfig.nJetton&&null!=this.curBetIndex)&&(this._nFreeCount>0||(this._lastScore<this.bets[this.curBetIndex]?(this.showLowLackMoney(),!1):(this._currentScore=this._lastScore-this.bets[this.curBetIndex],this.upPlayerScore(this._currentScore),!0)))},r.onStartRoll=function(){if(this.node.stopAllActions(),this.resetGameView(),-1!=this.playingEffectID&&E.stopSFX(this.playingEffectID),this.judgeCannotRollGame()){this._gameEnd=!1,this.changeGameState(1),this.onSendRoll(),this.showCenterNormal(),this.onGameStart(),this.rollPanel.startRollActions(),this.playEffect("shuax");var t=this.bets[this.curBetIndex]*B.JackPotTax,e=this.jackpotScore+t;G.send(R.onEventGameMessage,{s:w.SUB_S_JACKPOT_RESET,msg:{lJackPot:e}})}},r.resetGameView=function(){this.hideResultPanel(),this.node.getChildByName("freeWin").active=!1},r.resetAllBtn=function(){this._bAutoGame||this._bSpecialGame||(this.upBtnInteractable(this.startBtn,!0),this.upBetAddOrDelState())},r.onGameStart=function(){this.upBtnInteractable(this.startBtn,!1),this.upBtnInteractable(this.addBtn,!1),this.upBtnInteractable(this.delBtn,!1)},r.showGameEnd=function(){this._gameEnd=!0,this.changeGameState(2),P.print("showGameEnd"),G.send(R.saveData),1==this._bFreeState?this.showGetFreeTimes(this.gameEndData.cbFreeAdd):(this.winAniIdx<0||this._bSpecialGame)&&(P.print("delayStartNextRoll"),this.delayStartNextRoll(.3))},r.onClickSkip=function(){this.playButtonEffect();var t=this.resultNode.getChildByName("mask").getChildByName("scoreNode");this.skipScoreAdd(t.getChildByName("score").getComponent(c),t.getChildByName("score2").getComponent(c))},r.showResultPanel=function(){var t=this;this.changeGameState(3),this.resultNode.active=!0;var e=this.resultNode.getChildByName("mask"),i=e.getChildByName("goldani"),o=e.getChildByName("scoreNode"),n=o.getChildByName("score"),a=o.getChildByName("score2"),r=n.getComponent(c),s=a.getComponent(c),l=e.getChildByName("wani");l.active=!0,i.active=!0,o.active=!1;var u=l.getComponent(h.Skeleton);if(u.skeletonData=this.winSpineData[this.winAniIdx],this.winAniIdx>0){var d=i.getComponent(h.Skeleton);d.clearTracks(),d.setAnimation(0,"a"+(this.winAniIdx>3?3:this.winAniIdx),!0),this.winAniIdx>2&&this.playJackpotAni()}else i.active=!1;this.isPlayingScoreAddAni=!0,u.clearTracks(),u.setAnimation(0,"a1",!1),u.addAnimation(0,"a2",!0),this.resultNode.stopAllActions(),g(this.resultNode).delay(.3).call((function(){o.active=!0,r.string="0",s.string=".00",t.playScoreAddAni(r,s)})).start()},r.playScoreAddAni=function(t,e){var i=this,o=0,n=this.gameConfig.nJetton[this.curBetIndex],a=P.formatString2Score(this.needPlayinfScore),r=parseFloat((n/100).toString());this.upScoreLabel1=function(){(o+=r)>=parseFloat(a)?i.skipScoreAdd(t,e):(t.string=Math.floor(o),e.string=parseFloat((o-Math.floor(o)).toString()).toFixed(2).toString().slice(1))},this.upScoreLabel1&&this.unschedule(this.upScoreLabel1),this.schedule(this.upScoreLabel1,.01)},r.skipScoreAdd=function(t,e){this.isPlayingScoreAddAni=!1,this.upScoreLabel1&&this.unschedule(this.upScoreLabel1);var i=parseFloat(P.formatString2Score(this.needPlayinfScore));t.string=Math.floor(i),e.string=parseFloat((i-Math.floor(i)).toString()).toFixed(2).toString().slice(1),this.delayStartNextRoll(.5)},r.hideResultPanel=function(){this.resultNode.active=!1},r.changeGameState=function(t){this._gameState=t},r.upBetAddOrDelState=function(){this.upBtnInteractable(this.delBtn,this.curBetIndex>0),this.upBtnInteractable(this.addBtn,this.curBetIndex<this.bets.length-1)},r.upBtnInteractable=function(t,e){t.getComponent(N).interactable=e},r.onClickResultMask=function(){this.isPlayingScoreAddAni?this.onClickSkip():this.hideResultPanel()},r.addGameWinScore=function(t){var e=t.data;this.allWinScore+=e,this.playinfScore=this.allWinScore,this.winScoreLabel.string=(this.allWinScore/100).toFixed(2)},r.playAddScoreMulti=function(t){var e=this,i=t.data.scoreNode,o=t.data.multi,n=t.data.idx,a=k(i);i.active=!1,a.active=!0;var r=d(i.parent.parent.parent.position.x,i.parent.parent.position.y,0);a.position=r,a.parent=this.node,g(a).delay(1.2*n+1).call((function(){e.playEffect("qiufly")})).to(.7,{position:d(a.position.x,r.y+10,a.position.z),scale:d(1.5,1.5,1.5)}).to(.5,{position:d(0,-328,0)}).call((function(){a.active=!1,e.playEndMultAdd(o),a.destroy()})).start()},r.playEndScoreAdd=function(t){var e=this,i=this.playinfScore,o=this.playinfScore+this.allWinScore*t,n=Math.floor((o-i)/20);n<=0&&(n=1),this.upScoreLabel&&this.unschedule(this.upScoreLabel),this.upScoreLabel=function(){(i+=n)>=o?(e.unschedule(e.upScoreLabel),e.scheduleOnce((function(){e.playinfScore=o,e.winScoreLabel.string=(o/100).toFixed(2)}),.1)):e.winScoreLabel.string=(i/100).toFixed(2)},this.schedule(this.upScoreLabel,.01)},r.playEndMultAdd=function(t){var e=this,i=this.playinfMult,o=this.playinfMult+t,n=Math.floor((o-i)/20);n<=0&&(n=1),this.upMultLabel&&this.unschedule(this.upMultLabel),this.upMultLabel=function(){(i+=n)>=o?(e.unschedule(e.upMultLabel),e.scheduleOnce((function(){e.playinfMult=o,e.winScoreLabel.string=(e.allWinScore/100).toFixed(2)+" x"+o.toFixed(0)}),.1)):e.winScoreLabel.string=(e.allWinScore/100).toFixed(2)+" x"+i.toFixed(0)},this.schedule(this.upMultLabel,.01)},r.showGameWinScore=function(t){var e=this;this.winAniIdx=-1,this.needPlayinfScore=this.gameEndData.m_lottery_size;var i=this.gameEndData.m_lottery_size,o=i/this.gameConfig.nJetton[this.curBetIndex];this._lastScore=t.data.lCurScore,this._currentScore=this._lastScore,this.upPlayerScore(this._currentScore),i<=0?this.showGameEnd():(this.playSoundByTimes(o),this.winScoreLabel.string=(this.needPlayinfScore/100).toFixed(2),this.scheduleOnce((function(){e.winAniIdx>=0&&e.showResultPanel(),e.playinfMult=0,e.showGameEnd()}),.2))},r.delayStartNextRoll=function(t){var e=this;this.changeGameState(0),this.node.stopAllActions(),g(this.node).delay(t).call((function(){e._bAutoGame?e.onStartRoll():(e.upBtnInteractable(e.startBtn,!0),e.resetAllBtn())})).start()},r.playJackpotAni=function(){this.delayShowJackpotSweepTime+=5,this.jackpotAni.clearTracks(),this.jackpotAni.setAnimation(0,"a2",!1)},r.showGetFreeTimes=function(t){var e=this;this.playEffect("freeget");var i=this.node.getChildByName("freeNode"),o=i.getChildByName("mask");i.active=!0,this._bSpecialGame=!0;var n=o.getChildByName("ani").getComponent(h.Skeleton);n.clearTracks(),n.setAnimation(0,"a1",!1);var a=o.getChildByName("s");a.getComponent(c).string=t,a.stopAllActions(),a.active=!1,o.stopAllActions(),g(o).delay(.4).call((function(){a.active=!0})).delay(2).call((function(){i.active=!1,e.delayStartNextRoll(.5)})).start()},r.showJackpotWin=function(t){var e=this,i=t.data;this.needPlayinfScore=i,this.playEffectByID(4),this.playJackpotAni();var o=this.node.getChildByName("freeWin");o.active=!0;var n=o.getChildByName("mask"),a=n.getChildByName("Node").getChildByName("score1"),r=n.getChildByName("Node").getChildByName("score2");a.stopAllActions(),r.stopAllActions(),a.active=!0,r.active=!0;var s=a.getComponent(c),l=r.getComponent(c);s.string="0",l.string=".00";var u=n.getComponent(h.Skeleton);u.clearTracks(),u.setAnimation(0,"a1",!1),this.isPlayingScoreAddAni=!0,u.setCompleteListener((function(){u.setCompleteListener(null),u.setAnimation(0,"a2",!0),a.active=!0,r.active=!0,e.playFreeWinAddAni(a.getComponent(c),r.getComponent(c))}))},r.hideJackpotWin=function(){var t=this.node.getChildByName("freeWin");t.stopAllActions(),t.active=!1,this.rollPanel.resumeShowPrizes()},r.onClickJackpotMask=function(){this.isPlayingScoreAddAni?this.onClickSkipFreeWin():this.hideJackpotWin()},r.onClickSkipFreeWin=function(){if(this.isPlayingScoreAddAni){var t=this.node.getChildByName("freeWin").getChildByName("mask").getChildByName("Node");this.skipFreeWinAdd(t.getChildByName("score1").getComponent(c),t.getChildByName("score2").getComponent(c))}else this.hideJackpotWin()},r.onClickFreeWinStart=function(){},r.playFreeWinAddAni=function(t,e){var i=this;t.string="0",e.string=".00";var o=0,n=this.gameConfig.nJetton[this.curBetIndex],a=parseFloat(P.formatString2Score(this.needPlayinfScore)),r=n/100;r<=0&&(r=1),this.upFreeWinLabel&&this.unschedule(this.upFreeWinLabel),this.upFreeWinLabel=function(){(o+=r)>=a?i.skipFreeWinAdd(t,e):(t.string=Math.floor(o),e.string=(o-Math.floor(o)).toFixed(2).toString().slice(1))},this.upFreeWinLabel&&this.unschedule(this.upFreeWinLabel),this.schedule(this.upFreeWinLabel,.01)},r.skipFreeWinAdd=function(t,e){var i=this;this.upFreeWinLabel&&this.unschedule(this.upFreeWinLabel),this.isPlayingScoreAddAni=!1;var o=parseFloat(P.formatString2Score(this.needPlayinfScore));t.string=Math.floor(o).toString(),e.string=(o-Math.floor(o)).toFixed(2).toString().slice(1),this._bAutoGame&&g(this.node.getChildByName("freeWin")).delay(1.5).call((function(){i.hideJackpotWin()})).start()},r.changeFreeWinBtn=function(t){var e=this.node.getChildByName("freeWin").getChildByName("mask");e.getChildByName("btn_start").active=!t,e.getChildByName("btn_skip").active=t},r.changeBtnState=function(t){this.startBtn.active=!t},r.refrushBet=function(){this.upBetAddOrDelState();var t=this.bets[this.curBetIndex];this.betNode.getChildByName("allbet").getComponent(c).string=P.formatString2Score(t).toString()},r.onClickStart=function(){this.playButtonEffect(),this.onStartRoll()},r.onClickQuick=function(t){this.playButtonEffect(),this._bAutoGame=!t.target.getComponent(v).isChecked,this._nAutoCount=-1},r.onClickMenu=function(){var t=this;this.playButtonEffect(),L.loadAsset("resources","GamePrefabs/Public/GameMenu",b,null,(function(e,i){e?console.error(e):(t._ruleNode||(t._ruleNode=k(i),t._ruleNode.parent=t.node.getChildByName("MenuNode")),t._ruleNode.getComponent("GameMenu").show(),t._ruleNode.getComponent("GameMenu").onBtnBangZhu=function(){t.showRule()})}))},r.onHideRule=function(){this.ruleNode.active=!1},r.showRule=function(){P.print("展示规则"),this._ruleNode&&(this._ruleNode.active=!1),this.ruleNode.active=!0},r.onClickAdd=function(){this.curBetIndex++,this.playButtonEffect(),this.refrushBet()},r.onClickDel=function(){this.curBetIndex--,this.playButtonEffect(),this.refrushBet()},r.onClickSet=function(){this.playButtonEffect(),this.setPanel.active=!0},r.onClickExit=function(){!this._gameEnd||this._nFreeCount>0?this.TipNode.getComponent(x).showTopTipMsg("can not exit game"):m.end()},r.showCenterNormal=function(){this._bSpecialGame||(this.allWinScore=0,this.node.getChildByName("RoomInfoNode").getChildByName("img_1").getChildByName("winNode").active=!0,this.node.getChildByName("RoomInfoNode").getChildByName("img_1").getChildByName("winNode").getChildByName("score").getComponent(c).string="0.00")},r.onClickRule=function(){var t=this;this.playButtonEffect(),L.loadAsset("resources","resourcesPrefab/ruleNode",b,(function(e,i){e?console.error(e):(t._ruleNode||(t._ruleNode=k(i),t._ruleNode.parent=t.node),t._ruleNode.getComponent("FruitRule").show())}))},r.upPlayerScore=function(t){var e=P.formatString2Score(t);console.log("-----------"+e),this.playerScore.string=e},r.upPlayerInfo=function(t){this._lastScore=t.GetUserScore()},r.playSoundByTimes=function(t){t<=0||(P.print("winTimes:"+t),t>120||t>100||t>80||t>64||t>48||t>32||t>20||t>12?this.winAniIdx=3:t>8?this.winAniIdx=2:t>4?this.winAniIdx=1:t>2?this.winAniIdx=0:t>1&&(this.winAniIdx=-1),this.playEffectByID(this.winAniIdx))},r.playEffectByID=function(t){var e=this.audioArr[t];e&&E.playEffectByAudioClip(e)},r.playButtonEffect=function(){this.playEffect("button")},r.playEffect=function(t,e){void 0===e&&(e=!1),e&&E.stopAllEffects(),E.playSFX(t)},e}(C)).prototype,"rollNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(dt.prototype,"playerScore",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(dt.prototype,"resultNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=e(dt.prototype,"betNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=e(dt.prototype,"startBtn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(dt.prototype,"addBtn",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=e(dt.prototype,"delBtn",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kt=e(dt.prototype,"quickBtn",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=e(dt.prototype,"homeBtn",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(dt.prototype,"exitBtn",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=e(dt.prototype,"freeLeftNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=e(dt.prototype,"ruleNode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bt=e(dt.prototype,"winScoreLabel",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=e(dt.prototype,"winSpineData",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),At=e(dt.prototype,"audioArr",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Pt=e(dt.prototype,"jackpotAni",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xt=e(dt.prototype,"jackpotNode",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jt=e(dt.prototype,"jackpotNumClone",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mt=e(dt.prototype,"jackpotNums",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),It=e(dt.prototype,"rightJackpotNode",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lt=e(dt.prototype,"rightJackpotPlayer1",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gt=e(dt.prototype,"rightJackpotPlayer2",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rt=e(dt.prototype,"rightJackpotPanel",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Et=e(dt.prototype,"rightJackPotClone",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ft=e(dt.prototype,"rightJackPotShowNode",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wt=e(dt.prototype,"rightJackPotContent",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=dt))||ut)||ut));r._RF.pop()}}}));

System.register("chunks:///_virtual/OlympusItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OlympusGameProtocol.ts","./AudioManager.ts"],(function(t){var i,e,n,o,l,a,r,u,s,c,m,h,d,p,f,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,a=t._decorator,r=t.Node,u=t.Label,s=t.v3,c=t.tween,m=t.UIOpacity,h=t.Vec3,d=t.Color,p=t.Component},function(t){f=t.OlympusGameProtocol},function(t){b=t.audioManager}],execute:function(){var A,y,v,_,g,N,w,I,C,S,L,O,V,z,M,x,E,k;l._RF.push({},"19ed0CSxeNDV6hIWwAB+ddE","OlympusItem",void 0);var D=a.ccclass,P=a.menu,Y=a.property;t("OlympusItem",(A=D("OlympusItem"),y=P("Game/Olympus/Item"),v=Y(r),_=Y(r),g=Y(r),N=Y(r),w=Y(u),A(I=y((S=i((C=function(t){function i(){for(var i,e=arguments.length,l=new Array(e),a=0;a<e;a++)l[a]=arguments[a];return i=t.call.apply(t,[this].concat(l))||this,n(i,"normalNode",S,o(i)),n(i,"normalAni",L,o(i)),n(i,"aniNode",O,o(i)),n(i,"boomNode",V,o(i)),n(i,"boomAni",z,o(i)),n(i,"multiNode",M,o(i)),n(i,"multiAni",x,o(i)),n(i,"lightAni",E,o(i)),n(i,"multiLabel",k,o(i)),i._value=-1,i._multiVal=0,i._lineCount=0,i._bSpecial=!1,i.endY=void 0,i.playedAni=void 0,i._spineData=null,i}e(i,t);var l=i.prototype;return l.setValue=function(t,i,e){var n=this;this.endY=0,this._value=t,this._bSpecial=t==f.SPECIAL_ICON&&void 0!==e,this.node.setScale(s(1,1,1)),this.node.setSiblingIndex(0),this._multiVal=e,this.playedAni=!1,this._spineData=i,this.normalAni.skeletonData=i,!this.normalAni._skeleton&&i&&console.error("err skeleton: "+i._name),this._bSpecial?setTimeout((function(){n.showMulti()}),300):this.showNormal()},l.getCount=function(){return this._lineCount},l.addCount=function(){this._lineCount++},l.checkSame=function(t){return this._value==t&&(this._lineCount++,!0)},l.getEndY=function(){return this.endY},l.reset=function(){this._value=-1,this._lineCount=0,this._bSpecial=!1},l.showJackpot=function(t,i){this.endY=i,this._value==f.JACKPOT_ICON&&c(this.node).delay(t+.2).to(.1,{scale:s(1.05,1.05,1)}).to(.1,{scale:s(1,1,1)}).start()},l.resetShow=function(){this.showNormal()},l.showNormal=function(){var t=this;this.aniNode.active=!1,this.normalNode.active=!0,this.boomNode.active=!1,this.multiNode.active=!1,this.normalAni.node.getComponent(m).opacity=255,this.scheduleOnce((function(){try{t.normalAni.setAnimation(0,"a1",!1)}catch(i){console.error("normalNode:"+t.normalNode.uuid+", n_aniNode:"+t.normalAni.node.uuid+",--"+t.normalNode.parent.parent._name+", --"+t.normalNode.parent.getSiblingIndex()+" err:"+i)}}),0)},l.showMulti=function(){var t=this;if(void 0!==this._multiVal){this.normalNode.active=!1,this.multiNode.active=!0,this.multiLabel.string=this._multiVal+"x",this.multiLabel.node.setScale(h.ZERO),this.multiLabel.node.active=!0,this.lightAni.node.active=!1,this.playedAni=!0,c(this.multiLabel.node).to(.3,{scale:s(1.1,1.1,1.1)}).to(.1,{scale:s(1,1,1)}).delay(.3).call((function(){t.multiAni.setAnimation(0,i+"b",!1),t.multiAni.addAnimation(0,i+"a",!0),t.playEffect("kills")})).start();var i=this.getMultiIdx();this.multiAni.setAnimation(0,i+"a",!0)}},l.getMultiIdx=function(){return this._multiVal>7?4:this._multiVal>4?3:this._multiVal>2?2:1},l.getMultiLabelNode=function(t){var i=this,e=this.getMultiIdx();return c(this.node).delay(1.2*t).call((function(){i.multiAni.setAnimation(0,e+"c",!1),i.multiAni.addAnimation(0,e+"a",!0)})).start(),this.multiLabel.node},l.getMulti=function(){return this._multiVal},l.isSpecial=function(){return this._bSpecial},l.grayItem=function(){this.normalAni.color=new d(112,128,105)},l.ungrayItem=function(){this.normalAni.color=new d(255,255,255)},l.getItemValue=function(){return this._value},l.showLightAni=function(){var t=this;if(this._lineCount<=0)return!1;this.node.setSiblingIndex(10),this.aniNode.active=!0,this.normalNode.active=!0,this.boomNode.active=!1;try{this.normalAni.setAnimation(0,"a2",!1),this.normalAni.setCompleteListener((function(){t.normalAni.setCompleteListener(null),t.showBoomAni()}))}catch(t){console.error(t)}return this.reset(),!0},l.showBoomAni=function(){this.normalNode.active=!1,this.boomNode.active=!0,this.boomAni.setAnimation(0,"a1",!1),this.playEffect("end")},l.playEffect=function(t,i){void 0===i&&(i=!1),i&&b.stopAllEffects(),b.playSFX(t)},i}(p)).prototype,"normalNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(C.prototype,"normalAni",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(C.prototype,"aniNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(C.prototype,"boomNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(C.prototype,"boomAni",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(C.prototype,"multiNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(C.prototype,"multiAni",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(C.prototype,"lightAni",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=i(C.prototype,"multiLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=C))||I)||I));l._RF.pop()}}}));

System.register("chunks:///_virtual/OlympusRollPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OlympusItem.ts","./OlympusGameProtocol.ts","./Global.ts","./eventManager.ts","./msgac.ts","./AudioManager.ts"],(function(t){var e,i,n,o,r,l,s,a,u,d,h,c,m,p,f,_,v,y,M,N,A,g,b,S,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,s=t.Node,a=t.Prefab,u=t.sp,d=t.instantiate,h=t.v3,c=t.view,m=t.dragonBones,p=t.v2,f=t.Label,_=t.tween,v=t.Component,y=t.Vec3,M=t.UIOpacity},function(t){N=t.OlympusItem},function(t){A=t.OlympusGameProtocol},function(t){g=t.global},function(t){b=t.eventManager},function(t){S=t.msgac},function(t){C=t.audioManager}],execute:function(){var I,O,x,L,w,z,P,R,E,U,J,X,D,G,W,B,T,V,k,q,K,j,F,H,Y,Z,$,Q,tt,et,it;r._RF.push({},"a32d1W+NqJIeqFjkC2+dGxV","OlympusRollPanel",void 0);var nt=l.ccclass,ot=l.menu,rt=l.property;t("OlympusRollPanel",(I=nt("OlympusRollPanel"),O=ot("Game/Olympus/RollPanel"),x=rt([s]),L=rt(a),w=rt(s),z=rt([u.SkeletonData]),P=rt({tooltip:"元素尺寸，高度"}),R=rt(s),E=rt(s),U=rt(s),J=rt(s),X=rt(s),I(D=O((W=e((G=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(e,"rollBG",W,o(e)),n(e,"itemClone",B,o(e)),n(e,"thorNode",T,o(e)),n(e,"itemSpines",V,o(e)),n(e,"LG_PATH_SC",k,o(e)),n(e,"LP_PATH_SC",q,o(e)),n(e,"bGameEnd",K,o(e)),n(e,"maxRolItemlLen",j,o(e)),n(e,"MAX_COL_NUM",F,o(e)),n(e,"MAX_ROW_NUM",H,o(e)),n(e,"SPECIAL_ICON",Y,o(e)),n(e,"sizec",Z,o(e)),n(e,"aniNode",$,o(e)),n(e,"topBGKuang",Q,o(e)),n(e,"coinLayer",tt,o(e)),n(e,"coinClone",et,o(e)),n(e,"qiuClone",it,o(e)),e._rollResultData=null,e.currentShowIdx=void 0,e.endIdxCnt=void 0,e.elementNode=void 0,e.elementJS=void 0,e._delayEndTime=void 0,e.tempSortIdx=void 0,e.needNewIdx=void 0,e.needAddItem=void 0,e._rollAddMulti=void 0,e.curAddMultiIdx=void 0,e.thorDB=void 0,e.itemData=void 0,e.tempValue=void 0,e.endNodeJS=void 0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){this._rollResultData={},this.itemData=[],this.tempValue=[],this.elementNode=[],this.elementJS=[];for(var t=0;t<A.MAX_ROW_NUM;++t){this.elementNode[t]=[],this.elementJS[t]=[],this.tempValue[t]=[];for(var e=0;e<A.MAX_COL_NUM;++e){this.tempValue[t][e]=this.getRandomValue();var i=d(this.itemClone);i.setPosition(h(0,(2-t)*this.sizec,0)),i.parent=this.rollBG[e],i.active=!0,this.elementNode[t][e]=i,this.elementJS[t][e]=this.elementNode[t][e].getComponent(N),this.elementJS[t][e].setValue(this.tempValue[t][e],this.itemSpines[this.tempValue[t][e]],0)}}this.thorNode.setPosition(h(538+(c.getVisibleSize().width-1334)/2.9,this.thorNode.position.y,this.thorNode.position.z)),this.thorDB=this.thorNode.getComponent(m.ArmatureDisplay)},r.showThorAni=function(){this.playEffect("thor"),this.playEffect("thors"),this.thorDB.playAnimation("a2",1),this.thorDB.addEventListener(m.EventObject.COMPLETE,this.onAnimationPlayComplete,this)},r.onAnimationPlayComplete=function(t){t.type===m.EventObject.COMPLETE&&(this.thorDB.removeEventListener(m.EventObject.COMPLETE,this.onAnimationPlayComplete,this),this.thorDB.playAnimation("a1",0))},r.forceStop=function(){for(var t=0;t<A.MAX_COL_NUM;++t){var e=this.rollBG[t];e.active=!0,e.stopAllActions(),e.setPosition(h(e.position.x,0,e.position.z))}},r.isSpecialIcon=function(t){return t==A.SPECIAL_ICON},r.getRandomValue=function(){return Math.floor(100*Math.random())%10},r.startRollActions=function(){var t=this;this.topBGKuang.active=!0,this.bGameEnd=!1,this._rollResultData=null,this.currentShowIdx=-1,this.endIdxCnt=0;for(var e=function(e){for(var i=function(i){t.elementNode[e][i].stopAllActions(),_(t.elementNode[e][i]).delay(.03*i).to(.2,{position:h(t.elementNode[e][i].position.x,t.elementNode[e][i].position.y-490,t.elementNode[e][i].position.z)}).call((function(){t.elementNode[e][i].setPosition(h(t.elementNode[e][i].position.x,(2-e)*t.sizec+490,t.elementNode[e][i].position.z)),t.elementJS[e][i].reset(),e==t.MAX_ROW_NUM-1&&i==t.MAX_COL_NUM-1&&(t.endIdxCnt=A.CELL_COUNT,t._delayEndTime=.2)})).start()},n=0;n<t.MAX_COL_NUM;++n)i(n)},i=0;i<this.MAX_ROW_NUM;++i)e(i);this.tempSortIdx=[[0,1,2,3,4],[0,1,2,3,4],[0,1,2,3,4],[0,1,2,3,4],[0,1,2,3,4],[0,1,2,3,4]],this.needNewIdx=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],this.needAddItem=[]},r.openPrizes=function(t){var e=this;if(1!=this.bGameEnd&&null!=this._rollResultData){this.endIdxCnt=0,this.currentShowIdx=t,this.topBGKuang.active=!0;var i=this._rollResultData.m_result_data[t];if(i){var n=this.needAddItem;0==t&&(n=i.m_desk_data);var o=!1;t>0&&console.debug("test");for(var r=0;r<this.needNewIdx.length;++r){var l=this.needNewIdx[r],s=Math.floor(l/6),a=l%6,c=0;n[r]==A.SPECIAL_ICON&&void 0!==(c=this._rollAddMulti[this.curAddMultiIdx++])&&(o=!0),this.elementJS[s][a].setValue(n[r],this.itemSpines[n[r]],c)}var m=0;o&&(m=.3,this.showThorAni()),0==t&&this.playEffect("luodi");for(var v=this.MAX_ROW_NUM-1;v>=0;--v)for(var y=function(t){var i=e.tempSortIdx[t][v],n=e.elementNode[i][t],o=(2-v)*e.sizec;n.stopAllActions(),e.elementJS[i][t].showJackpot(m,o);var r=0,l=function(){};n.position.y-o>e.sizec/2&&(e.elementJS[i][t].getItemValue()==A.SPECIAL_ICON&&e.elementJS[i][t].getMulti()>0&&!e.elementJS[i][t].playedAni&&(l=function(){var n=d(e.qiuClone);n.parent=e.coinLayer,n.position=h(e.rollBG[t].position.x,o,0),n.active=!0;var r=e.elementJS[i][t].getMultiIdx(),l=n.getComponent(u.Skeleton);l.setAnimation(0,"a"+r,!1),l.setCompleteListener((function(){l.setCompleteListener(null),n.destroy()}))}),r=20),_(n).delay(m+.03*t).call((function(){l()})).to(.1,{position:h(n.position.x,o-r,n.position.z)},{easing:"quartInOut"}).to(.05,{position:h(n.position.x,o,n.position.z)}).start()},M=0;M<this.MAX_COL_NUM;++M)y(M);if(i.m_win_score>0||i.m_deposit_lotttery>0){for(var N=[],C=[],I=!1,O=0;O<i.m_item_count.length;++O)if(i.m_item_count[O]>0){i.m_item_id[O]==A.WILD_ICON&&(I=!0),N[O]=[];for(var x=1e8,L=p(0,0),w="$+"+(Math.floor(this._rollResultData.m_chip_size*i.m_item_times[O]/100)/100).toFixed(2),z=0;z<this.MAX_ROW_NUM;++z)for(var P=0;P<this.MAX_COL_NUM;++P)if(this.elementJS[z][P].checkSame(i.m_item_id[O])){var R=this.disToCenter(this.rollBG[P].position.x,this.elementJS[z][P].getEndY());N[O].push({x:this.rollBG[P].position.x,y:this.elementJS[z][P].getEndY(),dis:R,score:w}),R<x&&(x=R,L=p(this.rollBG[P].position.x,this.elementJS[z][P].getEndY()))}N[O].sort((function(t,e){return t.dis-e.dis})),C.push({x:L.x,y:L.y,score:w})}g.print(N);for(var E=[],U=!1,J=0;J<N[0].length;++J){E[0]=N[0][J],U=!0;for(var X=1;X<N.length;++X)for(var D=0;D<N[X].length;++D){for(var G=N[X][D],W=!1,B=0;B<X;++B)if(this.disTwoPoint(G,E[B])<9600){W=!0;break}if(!W){E[X]=G;break}if(D==N[X].length-1){U=!1;break}}if(U)break;J==N[0].length-1&&(g.print("没有找到合适的点位，使用重叠点位"),E=C)}g.print(E);for(var T=0;T<E.length;++T){var V=E[T],k=d(this.coinClone);k.parent=this.coinLayer,k.name="coin",k.setPosition(h(V.x,V.y,0)),k.getComponent(f).string=V.score,k.active=!1}var q=2;return I&&(q=2.5),void _(this.node).delay(.3+m).call((function(){e.topBGKuang.active=!1,e.showPrizes(),e.showWinLabel()})).delay(q).call((function(){b.send(S.addGameWinScore,i.m_win_score),e.resetSortIdx(t)})).delay(.2).call((function(){i.m_deposit_lotttery>0?b.send(S.showJackpotWin,i.m_deposit_lotttery):e.openPrizes(t+1)})).start()}_(this.node).delay(.3).call((function(){e.topBGKuang.active=!1,e.bGameEnd=!0,e.showPrizes(!0)})).delay(1).call((function(){e.showPrizesEnd()})).start()}}},r.disTwoPoint=function(t,e){return e.y==t.y&&(t.x-e.x)*(t.x-e.x)==31329?6e3:(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},r.disToCenter=function(t,e){return t*t+e*e},r.resumeShowPrizes=function(){this.openPrizes(this.currentShowIdx+1)},r.resetSortIdx=function(t){g.print(this.elementJS);var e=[[0,1,2,3,4],[0,1,2,3,4],[0,1,2,3,4],[0,1,2,3,4],[0,1,2,3,4],[0,1,2,3,4]],i=[];this.needAddItem=[];for(var n=0;n<this.MAX_COL_NUM;++n){for(var o=this.MAX_ROW_NUM-1,r=this.MAX_ROW_NUM-1;r>=0;--r){var l=this.tempSortIdx[n][r];this.elementJS[l][n].getItemValue()>=0&&(e[n][o--]=l)}for(var s=294,a=this.MAX_ROW_NUM-1;a>=0;--a){var u=this.tempSortIdx[n][a];this.elementJS[u][n].getItemValue()<0&&(i.push(6*u+n),e[n][o--]=u,this.elementNode[u][n].setPosition(h(this.elementNode[u][n].position.x,s,this.elementNode[u][n].position.z)),s+=this.sizec)}}for(var d=this._rollResultData.m_result_data[t],c=d.m_desk_data,m=this._rollResultData.m_result_data[t+1].m_desk_data,p=0;p<d.m_item_count.length;++p)if(d.m_item_count[p]>0)for(var f=d.m_item_id[p],_=0;_<A.CELL_COUNT;++_)c[_]==f&&this.needAddItem.push(m[_]);this.tempSortIdx=e,i.sort((function(t,e){return t-e})),this.needNewIdx=i,g.print(this.tempSortIdx),g.print(this.needNewIdx),console.log("----------------needAddItem----------------"),g.print(this.needAddItem)},r.testPrint=function(){for(var t=0;t<this.MAX_ROW_NUM;++t)for(var e=0;e<this.MAX_COL_NUM;++e)g.print(t+" : "+e+" : "+this.elementJS[t][e].getItemValue())},r.showWinLabel=function(){for(var t=this,e=function(){var e=t.coinLayer.children[i];if(e&&"coin"==e.name){e.active=!0,e.setScale(y.ZERO),e.getComponent(M).opacity=0,e.stopAllActions();var n=e.position.y+50,o=e.getComponent(M);_(e).to(.3,{scale:h(1.1,1.1,1.1)},{onUpdate:function(t,e){o.opacity=255*e}}).to(.8,{position:new y(e.position.x,n,e.position.z),scale:new y(1,1,1)},{onUpdate:function(t,e){o.opacity=255-105*e}}).call((function(){e.active=!1,e.destroy()})).start()}},i=0;i<this.coinLayer.children.length;++i)e()},r.showPrizes=function(t){void 0===t&&(t=!1);for(var e=!1,i=-1,n=0;n<A.MAX_ROW_NUM;++n)for(var o=0;o<A.MAX_COL_NUM;++o)i=this.elementJS[n][o].getItemValue(),this.elementJS[n][o].showLightAni()&&i==A.WILD_ICON&&(e=!0);t||(e?this.playEffect("leishen"):this.playEffect("ending"))},r.showPrizesEnd=function(){var t=this,e=.5;if(this.curAddMultiIdx>0&&this._rollResultData.m_lottery_size>0){for(var i=0,n=0;n<this.MAX_COL_NUM;++n)for(var o=0;o<this.MAX_ROW_NUM;++o)this.elementJS[o][n].isSpecial()?b.send(S.playAddScoreMulti,{scoreNode:this.elementJS[o][n].getMultiLabelNode(i),multi:this.elementJS[o][n].getMulti(),idx:i++}):this.elementJS[o][n].grayItem();e=1.2*i+2}else this.curAddMultiIdx>0&&(e=1.2);_(this.node).delay(e).call((function(){b.send(S.showGameWinScore,t._rollResultData),t.resetItems()})).start()},r.resetItems=function(){for(var t=0;t<this.MAX_COL_NUM;++t)for(var e=0;e<this.MAX_ROW_NUM;++e)this.elementJS[e][t].ungrayItem()},r.setRollDatas=function(t){this._rollResultData=t,this._rollAddMulti=t.m_add_multi,this.curAddMultiIdx=0,g.print("setRollDatas"),this._delayEndTime<=0&&this.endIdxCnt>=A.CELL_COUNT&&(g.print("openPrizes"),this.openPrizes(0))},r.resetItemsShow=function(){for(var t=0;t<A.MAX_COL_NUM;++t)for(var e=0;e<A.MAX_ROW_NUM;++e)this.endNodeJS[e][t].showNormal()},r.doOthersWithResultData=function(){for(var t=this._rollResultData.m_desk_data,e=0;e<A.MAX_COL_NUM;++e)for(var i=0;i<A.MAX_ROW_NUM;++i)this.endNodeJS[i][e].setValue(t[i][e],this.itemSpines[t[i][e]],0),this.endNodeJS[i][e].setCount(this.elementJS[e][i+17].getCount())},r.update=function(t){this._delayEndTime>0&&(this._delayEndTime-=t,this._delayEndTime<=0&&this._rollResultData&&(g.print("openPrizes2"),this.openPrizes(0)))},r.playEffect=function(t,e){void 0===e&&(e=!1),e&&C.stopAllEffects(),C.playSFX(t)},e}(v)).prototype,"rollBG",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=e(G.prototype,"itemClone",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(G.prototype,"thorNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(G.prototype,"itemSpines",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=e(G.prototype,"LG_PATH_SC",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),q=e(G.prototype,"LP_PATH_SC",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"LB-Public/"}}),K=e(G.prototype,"bGameEnd",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=e(G.prototype,"maxRolItemlLen",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 21}}),F=e(G.prototype,"MAX_COL_NUM",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),H=e(G.prototype,"MAX_ROW_NUM",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),Y=e(G.prototype,"SPECIAL_ICON",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 12}}),Z=e(G.prototype,"sizec",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 120}}),$=e(G.prototype,"aniNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(G.prototype,"topBGKuang",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(G.prototype,"coinLayer",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(G.prototype,"coinClone",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(G.prototype,"qiuClone",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=G))||D)||D));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/OLYMPUS', 'chunks:///_virtual/OLYMPUS'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});